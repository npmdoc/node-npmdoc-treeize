<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/kwhitley/treeize#readme"

    >treeize (v2.0.2)</a>
</h1>
<h4>Converts tabular row data (as from SQL joins, flat JSON, etc) to deep object graphs based on simple column naming conventions - without the use of an ORM or models.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.treeize">module treeize</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize">
            function <span class="apidocSignatureSpan"></span>treeize
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable">
            function <span class="apidocSignatureSpan">treeize.</span>treeize_stable
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">treeize.</span>treeize_stable.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.treeize.treeize_stable">module treeize.treeize_stable</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.treeize_stable">
            function <span class="apidocSignatureSpan">treeize.</span>treeize_stable
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.treeize.treeize_stable.prototype">module treeize.treeize_stable.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.clearSignature">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>clearSignature
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.getData">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>getData
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.getOptions">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>getOptions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.getSignature">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>getSignature
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.getStats">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>getStats
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.grow">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>grow
            <span class="apidocSignatureSpan">(data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.log">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>log
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.options">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>options
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.resetOptions">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>resetOptions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.setOptions">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>setOptions
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.setSignature">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>setSignature
            <span class="apidocSignatureSpan">(row, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.setSignatureAuto">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>setSignatureAuto
            <span class="apidocSignatureSpan">(row, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.signature">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>signature
            <span class="apidocSignatureSpan">(row, options, auto)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.treeize.treeize_stable.prototype.toString">
            function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.treeize" id="apidoc.module.treeize">module treeize</a></h1>


    <h2>
        <a href="#apidoc.element.treeize.treeize" id="apidoc.element.treeize.treeize">
        function <span class="apidocSignatureSpan"></span>treeize
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Treeize(options) {
  this.baseOptions = {
    input: {
      delimiter:          &#x27;:&#x27;,
      detectCollections:  true,
      uniformRows:        false,
    },
    output: {
      prune:              true,
      objectOverwrite:    true,
      resultsAsObject:    false,
    },
    log:                  false,
  };

  this.data = {
    signature: {
      nodes: [],
      type: null,
    },
    seed: [],
    tree: [],
  };

  this.stats = {
    time:     {
      total:      0,
      signatures: 0,
    },
    rows:         0,
    sources:      0,
  };

  // set default options (below)
  this.resetOptions();

  if (options) {
    this.options(options);
  }

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable" id="apidoc.element.treeize.treeize_stable">
        function <span class="apidocSignatureSpan">treeize.</span>treeize_stable
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Treeize(options) {
  this.baseOptions = {
    input: {
      delimiter:          &#x27;:&#x27;,
      detectCollections:  true,
      uniformRows:        false,
    },
    output: {
      prune:              true,
      objectOverwrite:    true,
      resultsAsObject:    false,
    },
    log:                  false,
  };

  this.data = {
    signature: {
      nodes: [],
      type: null,
    },
    seed: [],
    tree: [],
  };

  this.stats = {
    time:     {
      total:      0,
      signatures: 0,
    },
    rows:         0,
    sources:      0,
  };

  // set default options (below)
  this.resetOptions();

  if (options) {
    this.options(options);
  }

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.treeize.treeize_stable" id="apidoc.module.treeize.treeize_stable">module treeize.treeize_stable</a></h1>


    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.treeize_stable" id="apidoc.element.treeize.treeize_stable.treeize_stable">
        function <span class="apidocSignatureSpan">treeize.</span>treeize_stable
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Treeize(options) {
  this.baseOptions = {
    input: {
      delimiter:          &#x27;:&#x27;,
      detectCollections:  true,
      uniformRows:        false,
    },
    output: {
      prune:              true,
      objectOverwrite:    true,
      resultsAsObject:    false,
    },
    log:                  false,
  };

  this.data = {
    signature: {
      nodes: [],
      type: null,
    },
    seed: [],
    tree: [],
  };

  this.stats = {
    time:     {
      total:      0,
      signatures: 0,
    },
    rows:         0,
    sources:      0,
  };

  // set default options (below)
  this.resetOptions();

  if (options) {
    this.options(options);
  }

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.treeize.treeize_stable.prototype" id="apidoc.module.treeize.treeize_stable.prototype">module treeize.treeize_stable.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.clearSignature" id="apidoc.element.treeize.treeize_stable.prototype.clearSignature">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>clearSignature
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clearSignature = function () {
  this.data.signature = { nodes: [], type: null };
  this.data.signature.isFixed = false;

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
.setSignature([&#x27;id&#x27;, &#x27;name:first&#x27;, &#x27;name:last&#x27;, &#x27;hobbies:name&#x27;, &#x27;hobbies:years&#x27
;])
```

### .getSignature()&#x3c;a name=&#x22;getSignature&#x22; /&#x3e;

Returns currently defined signature. _For internal use only._

### .<span class="apidocCodeKeywordSpan">clearSignature</span>()&#x3c;a name=&#x22;clearSignature&#x22; /&#x3e;

Clears currently-defined signature if previously set via [`setSignature(row)`](#setSignature), and returns self (chainable).  This
 is only required between data sets if signature auto-detection should be re-enabled.  It is unlikely that you will need to use
this.

### .getData()&#x3c;a name=&#x22;getData&#x22; /&#x3e;

Returns current data tree.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.getData" id="apidoc.element.treeize.treeize_stable.prototype.getData">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>getData
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getData = function () {
  return this.data.tree;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var Treeize   = require(&#x27;treeize&#x27;);
var people    = new Treeize();

people.grow(peopleData);


// ...into deep API-ready object graphs like this:
people.<span class="apidocCodeKeywordSpan">getData</span>() == [
{
  name: &#x27;John Doe&#x27;,
  age: 34,
  pets: [
    {
      name: &#x27;Rex&#x27;,
      type: &#x27;dog&#x27;,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.getOptions" id="apidoc.element.treeize.treeize_stable.prototype.getOptions">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>getOptions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getOptions = function () {
  return this._options;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`toString()`](#toString) - uses `util` to return data in visually formatted object graph
- [`log(arg1, arg2, arg3)`](#log) - console.log output of `arg1..n` when `log` option is set to `true`

# API

### .options([options])&#x3c;a name=&#x22;options&#x22; /&#x3e;

[Getter](#getOptions)/[Setter](#setOptions) for options.  If options object is passed, this is identical to [.setOptions(options
)](#setOptions) and returns self (chainable).  If no options are passed, this is identical to [.<span class="apidocCodeKeywordSpan
">getOptions</span>()](#getOptions) and returns current options as object.


### .setOptions(options)&#x3c;a name=&#x22;setOptions&#x22; /&#x3e;

Sets options globally for the Treeize instance.  This is an alias for `.options(options)`. Default options are as follows:

```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.getSignature" id="apidoc.element.treeize.treeize_stable.prototype.getSignature">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>getSignature
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getSignature = function () {
  return this.signature();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### .resetOptions(options)&#x3c;a name=&#x22;resetOptions&#x22; /&#x3e;

Resets all global options to [original defaults](#setOptions) and returns self (chainable).

### .signature([row], [options])&#x3c;a name=&#x22;signature&#x22; /&#x3e;

[Getter](#getSignature)/[Setter](#setSignature) for row signatures.  If options object is passed, this is identical to [.setSignature
(options)](#setSignature) and returns self (chainable).  If no options are passed, this is identical to [.<span class="apidocCodeKeywordSpan
">getSignature</span>()](#getSignature) and returns currently defined signature as object.


### .setSignature(row, [options])&#x3c;a name=&#x22;setSignature&#x22; /&#x3e;

Manually defines the signature for upcoming data sets from argument `row`, with optional `options`.  The row may be either in object
 (key/value) form or flat array form (array of paths). This method is only required if sharing a single signature across multiple
 data sources (when merging homogeneous data sets), or when the data itself has no header information (for instance, with bulk flat
 array-of-values data).  Returns self (chainable).

```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.getStats" id="apidoc.element.treeize.treeize_stable.prototype.getStats">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>getStats
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getStats = function () {
  return this.stats;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  { &#x27;foo&#x27;: &#x27;bar&#x27;, &#x27;logs:a&#x27;: 1 },
  { &#x27;foo&#x27;: &#x27;bar&#x27;, &#x27;logs:a&#x27;: 2 },
  { &#x27;foo&#x27;: &#x27;baz&#x27;, &#x27;logs:a&#x27;: 3 }
]
*/
```

### .<span class="apidocCodeKeywordSpan">getStats</span>()&#x3c;a name=&#x22;getStats&#x22; /&#x3e;

Returns current growth statistics (e.g. number of sources process, number of rows, etc). _Output and format subject to change -
use at your own risk._

### .toString()&#x3c;a name=&#x22;toString&#x22; /&#x3e;

Typecasting a treeize instance to String or manually calling `.toString()` on it will output it visually using the `util` library
 from node.js.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.grow" id="apidoc.element.treeize.treeize_stable.prototype.grow">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>grow
        <span class="apidocSignatureSpan">(data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">grow = function (data, options) {
  var opt = merge(this._options, options || {});

  // chain past if no data to grow
  if (!data || !_.isArray(data) || !data.length) {
    return this;
  }

  this.log(&#x27;OPTIONS&#x3e;&#x27;, opt);

  // locate existing signature (when sharing signatures between data sources)
  var signature = this.getSignature();

  // set data uniformity (locally) to true to avoid signature fetching on data rows
  if (_.isArray(data[0])) {
    opt.input.uniformRows = true;
  }

  if (!signature.nodes.length) {
    this.log(&#x27;setting signature from first row of data (auto)&#x27;);
    // set signature from first row
    signature = this.setSignatureAuto(data[0], options).getSignature();

    // remove header row in flat array data (avoids processing headers as actual values)
    if (_.isArray(data[0])) {
      var originalData = data;
      data = [];

      // copy data without original signature row before processing
      _.each(originalData, function(row, index) {
        if (index &#x3e; 0) {
          data.push(row);
        }
      });
    }
  }

  if (opt.output.resultsAsObject &#x26;&#x26; _.isArray(this.data.tree)) {
    this.data.tree = {};
  }

  this.log(&#x27;SIGNATURE&#x3e;&#x27;, util.inspect(this.getSignature(), false, null));

  this.stats.sources++;
  var t1 = (new Date()).getTime();

  _.each(data, function(row) {
    var trails = {}; // LUT for trails (find parent of new node in trails path)
    var trail = root = this.data.tree; // OPTIMIZATION: do we need to reset this trail for each row?
    this.log(&#x27;CURRENT TRAIL STATUS&#x3e;&#x27;, trail);
    var t = null;

    // set initial root object path for non-array datasets
    if (opt.output.resultsAsObject) {
      trails[&#x27;&#x27;] = trail;
    }

    if (!this.data.signature.isFixed &#x26;&#x26; !opt.input.uniformRows) {
      this.log(&#x27;setting signature from new row of data (auto)&#x27;);
      // get signature from each row
      this.setSignatureAuto(row, opt);
      this.log(&#x27;SIGNATURE&#x3e;&#x27;, util.inspect(this.getSignature(), false, null));
    }

    this.stats.rows++;

    if (_.where(this.signature().nodes, { flags: true }).length) {
      // flags detected within signature, clean attributes of row
      _.each(row, function(value, key) {
        if (typeof key === &#x27;string&#x27;) {
          var clean = key.replace(/^[\*\-\+]|[\*\-\+]$/g,&#x27;&#x27;);
          if (clean !== key) {
            this.log(&#x27;cleaning key &#x22;&#x27; + key + &#x27;&#x22; and embedding as &#x22;&#x27; + clean + &#x27;&#x22;&#x27;);
            row[key.replace(/^[\*\-\+]|[\*\-\+]$/g,&#x27;&#x27;)] = value; // simply embed value at clean path (if not already)
          }
        }
      }, this);
    }

    _.each(this.signature().nodes, function(node) {
      this.log(&#x27;PROCESSING NODE&#x3e;&#x27;, node);
      var blueprint = {};
      var blueprintExtended = {};

      // create blueprint for locating existing nodes
      _.each(node.blueprint, function(attribute) {
        var key = (node.path ? (node.path + &#x27;:&#x27;) : &#x27;&#x27;) + attribute.name;
        blueprint[attribute.name] = row[attribute.key];
        this.log(&#x27;creating attribute &#x22;&#x27; + attribute.name + &#x27;&#x22; within blueprint&#x27;, row[attribute.key]);
      }, this);

      // create full node signature for insertion/updating
      _.each(node.attributes, function(attribute) {
        var key = (node.path ? (node.path + &#x27;:&#x27;) : &#x27;&#x27;) + attribute.name;
        var value = row[attribute.key];

        // insert extended blueprint attributes when not empty (or not pruning)
        if (!opt.output.prune || (value !== null &#x26;&#x26; value !== undefined)) {
          this.log(&#x27;creating attribute &#x22;&#x27; + attribute.name + &#x27;&#x22; within extended blueprint&#x27;, row[attribute.key]);
          blueprintExtended[attribute.name] = row[attribute.key];
        }
      }, this);

      this.log(&#x27;EXTENDED BLUEPRINT&#x3e;&#x27;, blueprintExtended);
      this.log(&#x27;BLUEPRINT&#x3e;&#x27;, blueprint);

      // ONLY INSERT IF NOT PRUNED
      if (!opt.output.prune || !_.isEmpty(blueprintExtended)) {
        // IF 0 DEPTH AND RESULTSASOBJECT, EXTEND ROOT
        if (opt.output.resultsAsObject &#x26;&#x26; node.depth === 0) {
          _.extend(trails[node.path] = trail = root, blueprintExtended);
          this.log(&#x27;extending blueprint onto r ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
];


// ...via a dead-simple implementation:
var Treeize   = require(&#x27;treeize&#x27;);
var people    = new Treeize();

people.<span class="apidocCodeKeywordSpan">grow</span>(peopleData);


// ...into deep API-ready object graphs like this:
people.getData() == [
{
  name: &#x27;John Doe&#x27;,
  age: 34,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.log" id="apidoc.element.treeize.treeize_stable.prototype.log">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>log
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function () {
  if (this._options.log) {
    console.log.apply(this, arguments);
  }

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

tree.grow([
  { &#x27;foo&#x27;: &#x27;bar&#x27;, &#x27;logs:a&#x27;: 1 },
  { &#x27;foo&#x27;: &#x27;bar&#x27;, &#x27;logs:a&#x27;: 2 },
  { &#x27;foo&#x27;: &#x27;baz&#x27;, &#x27;logs:a&#x27;: 3 },
]);

console.<span class="apidocCodeKeywordSpan">log</span>(tree.getData());

/*
[
  { foo: &#x27;bar&#x27;, logs: [{ a: 1 }, { a: 2 }] },
  { foo: &#x27;baz&#x27;, logs: [{ a: 3 }]}
]
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.options" id="apidoc.element.treeize.treeize_stable.prototype.options">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>options
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">options = function (options) {
  if (!options) {
    return merge({}, this._options);
  }

  this._options = merge(this._options, options);

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

- [`getStats()`](#getStats) - returns object with growth statistics
- [`toString()`](#toString) - uses `util` to return data in visually formatted object graph
- [`log(arg1, arg2, arg3)`](#log) - console.log output of `arg1..n` when `log` option is set to `true`

# API

### .<span class="apidocCodeKeywordSpan">options</span>([options])&#x3c;a name=&#x22;options&#x22; /&#x3e;

[Getter](#getOptions)/[Setter](#setOptions) for options.  If options object is passed, this is identical to [.setOptions(options
)](#setOptions) and returns self (chainable).  If no options are passed, this is identical to [.getOptions()](#getOptions) and returns
 current options as object.


### .setOptions(options)&#x3c;a name=&#x22;setOptions&#x22; /&#x3e;

Sets options globally for the Treeize instance.  This is an alias for `.options(options)`. Default options are as follows:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.resetOptions" id="apidoc.element.treeize.treeize_stable.prototype.resetOptions">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>resetOptions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resetOptions = function () {
  this._options = merge({}, this.baseOptions);

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### .getOptions()&#x3c;a name=&#x22;getOptions&#x22; /&#x3e;

Returns the current global options (as object).
[View example format](#setOptions)


### .<span class="apidocCodeKeywordSpan">resetOptions</span>(options)&#x3c;a name=&#x22;resetOptions&#x22; /&#x3e;

Resets all global options to [original defaults](#setOptions) and returns self (chainable).

### .signature([row], [options])&#x3c;a name=&#x22;signature&#x22; /&#x3e;

[Getter](#getSignature)/[Setter](#setSignature) for row signatures.  If options object is passed, this is identical to [.setSignature
(options)](#setSignature) and returns self (chainable).  If no options are passed, this is identical to [.getSignature()](#getSignature
) and returns currently defined signature as object.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.setOptions" id="apidoc.element.treeize.treeize_stable.prototype.setOptions">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>setOptions
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setOptions = function (options) {
  return this.options(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- [`toString()`](#toString) - uses `util` to return data in visually formatted object graph
- [`log(arg1, arg2, arg3)`](#log) - console.log output of `arg1..n` when `log` option is set to `true`

# API

### .options([options])&#x3c;a name=&#x22;options&#x22; /&#x3e;

[Getter](#getOptions)/[Setter](#setOptions) for options.  If options object is passed, this is identical to [.<span class="apidocCodeKeywordSpan
">setOptions</span>(options)](#setOptions) and returns self (chainable).  If no options are passed, this is identical to [.getOptions
()](#getOptions) and returns current options as object.


### .setOptions(options)&#x3c;a name=&#x22;setOptions&#x22; /&#x3e;

Sets options globally for the Treeize instance.  This is an alias for `.options(options)`. Default options are as follows:

```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.setSignature" id="apidoc.element.treeize.treeize_stable.prototype.setSignature">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>setSignature
        <span class="apidocSignatureSpan">(row, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setSignature = function (row, options) {
  return this.signature(row, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### .resetOptions(options)&#x3c;a name=&#x22;resetOptions&#x22; /&#x3e;

Resets all global options to [original defaults](#setOptions) and returns self (chainable).

### .signature([row], [options])&#x3c;a name=&#x22;signature&#x22; /&#x3e;

[Getter](#getSignature)/[Setter](#setSignature) for row signatures.  If options object is passed, this is identical to [.<span class
="apidocCodeKeywordSpan">setSignature</span>(options)](#setSignature) and returns self (chainable).  If no options are passed, this
 is identical to [.getSignature()](#getSignature) and returns currently defined signature as object.


### .setSignature(row, [options])&#x3c;a name=&#x22;setSignature&#x22; /&#x3e;

Manually defines the signature for upcoming data sets from argument `row`, with optional `options`.  The row may be either in object
 (key/value) form or flat array form (array of paths). This method is only required if sharing a single signature across multiple
 data sources (when merging homogeneous data sets), or when the data itself has no header information (for instance, with bulk flat
 array-of-values data).  Returns self (chainable).

```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.setSignatureAuto" id="apidoc.element.treeize.treeize_stable.prototype.setSignatureAuto">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>setSignatureAuto
        <span class="apidocSignatureSpan">(row, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setSignatureAuto = function (row, options) {
  return this.signature(row, options, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (_.isArray(data[0])) {
    opt.input.uniformRows = true;
  }

  if (!signature.nodes.length) {
    this.log(&#x27;setting signature from first row of data (auto)&#x27;);
    // set signature from first row
    signature = this.<span class="apidocCodeKeywordSpan">setSignatureAuto</span>(data[0], options).getSignature();

    // remove header row in flat array data (avoids processing headers as actual values)
    if (_.isArray(data[0])) {
var originalData = data;
data = [];

// copy data without original signature row before processing
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.signature" id="apidoc.element.treeize.treeize_stable.prototype.signature">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>signature
        <span class="apidocSignatureSpan">(row, options, auto)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">signature = function (row, options, auto) {
  if (!row) {
    return this.data.signature;
  }

  // start timer
  var t1 = (new Date()).getTime();

  // sets the signature as fixed (or not) when manually set
  this.data.signature.isFixed = auto !== true;

  var nodes         = this.data.signature.nodes = [];
  var isArray       = _.isArray(row);
  var opt           = merge(this._options, options || {});

  this.data.signature.type = isArray ? &#x27;array&#x27; : &#x27;object&#x27;;

  _.each(row, function(value, key) {
    // set up attribute
    var attr        = {}

    attr.key        = typeof key === &#x27;number&#x27; ? key : key.replace(/^[\*\-\+]|[\*\-\+]$/g,&#x27;&#x27;);
    attr.fullPath   = isArray ? value : key;
    attr.split      = attr.fullPath.split(opt.input.delimiter);
    attr.path       = attr.split.slice(0,attr.split.length-1).join(opt.input.delimiter);
    attr.parent     = attr.split.slice(0,attr.split.length-2).join(opt.input.delimiter).replace(/^[\*\-\+]|[\*\-\+]$/g,&#x27;&#x27;);
    attr.node       = attr.split[attr.split.length - 2];
    attr.attr       = attr.split[attr.split.length - 1];

    if (attr.attr.match(/\*/gi)) {
      attr.attr = attr.attr.replace(/[\*]/gi,&#x27;&#x27;);
      attr.pk = true;
    }

    if (attr.pk) {
      this.log(&#x27;primary key detected in node &#x22;&#x27; + attr.attr + &#x27;&#x22;&#x27;);
    }

    // set up node reference
    var node = _.findWhere(nodes, { path: attr.path });
    if (!node) {
      node = { path: attr.path, attributes: [], blueprint: [] };
      nodes.push(node);
    }

    node.isCollection = !attr.node || (opt.input.detectCollections &#x26;&#x26; inflection.pluralize(attr.node) === attr.node);

    var collectionFlag = attr.node &#x26;&#x26; attr.node.match(/^[\-\+]|[\-\+]$/g);
    if (collectionFlag) {
      this.log(&#x27;collection flag &#x22;&#x27; + collectionFlag + &#x27;&#x22; detected in node &#x22;&#x27; + attr.node + &#x27;&#x22;&#x27;);
      node.flags = true;
      node.isCollection = attr.node.match(/^\+|\+$/g);
      attr.node = attr.node.replace(/^[\*\-\+]|[\*\-\+]$/g,&#x27;&#x27;); // clean node
    }

    node.name         = attr.node;
    node.depth        = attr.split.length - 1;
    node.parent       = _.initial(attr.split, 2).join(opt.input.delimiter);
    node.attributes.push({ name: attr.attr, key: attr.key });
    if (attr.pk) {
      this.log(&#x27;adding node to blueprint&#x27;);
      node.flags = true;
      node.blueprint.push({ name: attr.attr, key: attr.key });
    }
  }, this);

  // backfill blueprint when not specifically defined
  _.each(nodes, function(node) {
    if (!node.blueprint.length) {
      node.blueprint = node.attributes;
    }
  });

  nodes.sort(function(a, b) { return a.depth &#x3c; b.depth ? -1 : 1; });

  // end timer and add time
  var t2 = ((new Date()).getTime() - t1);
  this.stats.time.signatures += t2;
  this.stats.time.total += t2;

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
[View example format](#setOptions)


### .resetOptions(options)&#x3c;a name=&#x22;resetOptions&#x22; /&#x3e;

Resets all global options to [original defaults](#setOptions) and returns self (chainable).

### .<span class="apidocCodeKeywordSpan">signature</span>([row], [options])&#x3c;a name=&#x22;signature&#x22; /&#x3e;

[Getter](#getSignature)/[Setter](#setSignature) for row signatures.  If options object is passed, this is identical to [.setSignature
(options)](#setSignature) and returns self (chainable).  If no options are passed, this is identical to [.getSignature()](#getSignature
) and returns currently defined signature as object.


### .setSignature(row, [options])&#x3c;a name=&#x22;setSignature&#x22; /&#x3e;

Manually defines the signature for upcoming data sets from argument `row`, with optional `options`.  The row may be either in object
 (key/value) form or flat array form (array of paths). This method is only required if sharing a single signature across multiple
 data sources (when merging homogeneous data sets), or when the data itself has no header information (for instance, with bulk flat
 array-of-values data).  Returns self (chainable).
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.treeize.treeize_stable.prototype.toString" id="apidoc.element.treeize.treeize_stable.prototype.toString">
        function <span class="apidocSignatureSpan">treeize.treeize_stable.prototype.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function treeToString() {
  return util.inspect(this.data.tree, false, null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/
```

### .getStats()&#x3c;a name=&#x22;getStats&#x22; /&#x3e;

Returns current growth statistics (e.g. number of sources process, number of rows, etc). _Output and format subject to change -
use at your own risk._

### .<span class="apidocCodeKeywordSpan">toString</span>()&#x3c;a name=&#x22;toString&#x22; /&#x3e;

Typecasting a treeize instance to String or manually calling `.toString()` on it will output it visually using the `util` library
 from node.js.

```js
var tree = new Treeize();

tree.grow(data);
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
